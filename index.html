<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador Visual de APK</title>
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #FF9800;
            --dark: #333;
            --light: #f5f5f5;
            --success: #4CAF50;
            --danger: #f44336;
            --gray: #ccc;
            --sidebar-width: 350px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: var(--dark);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .logo-icon {
            font-size: 2.2rem;
        }
        
        .container {
            display: flex;
            height: calc(100vh - 80px);
        }
        
        .sidebar {
            width: var(--sidebar-width);
            background-color: white;
            border-right: 1px solid var(--gray);
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .section {
            background: #fafafa;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.2rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            color: var(--dark);
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 1.2rem;
        }
        
        .btn {
            padding: 12px 16px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: #e68900;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #3d8b40;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 1rem;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            gap: 1.5rem;
        }
        
        .preview-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .preview-header {
            padding: 1.2rem 1.5rem;
            background: linear-gradient(135deg, #f5f5f5, #e8e8e8);
            border-bottom: 1px solid var(--gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .preview-content {
            flex: 1;
            padding: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f9f9f9, #f0f0f0);
            overflow: auto;
        }
        
        .phone-frame {
            width: 340px;
            height: 680px;
            background-color: #1a1a1a;
            border-radius: 40px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
            border: 12px solid #2a2a2a;
            display: flex;
            flex-direction: column;
        }
        
        .phone-notch {
            width: 60%;
            height: 25px;
            background-color: #2a2a2a;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }
        
        .phone-screen {
            flex: 1;
            background-color: white;
            overflow: auto;
            position: relative;
        }
        
        .app-bar {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 18px 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .screen-content {
            padding: 20px;
            min-height: 100%;
            position: relative;
        }
        
        .layout-horizontal .screen-content {
            display: flex;
            flex-direction: row;
            gap: 15px;
            flex-wrap: wrap;
            align-items: flex-start;
        }
        
        .element {
            margin-bottom: 20px;
            padding: 15px;
            border: 2px dashed #ddd;
            border-radius: 12px;
            background: white;
            transition: all 0.3s ease;
            position: relative;
            cursor: move;
        }
        
        .element:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .element.selected {
            border-color: var(--primary);
            background-color: #e3f2fd;
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.2);
        }
        
        .element.dragging {
            opacity: 0.7;
            transform: rotate(5deg);
        }
        
        .toolbar {
            padding: 1.5rem;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            display: flex;
            gap: 15px;
            justify-content: space-between;
            align-items: center;
        }
        
        .toolbar-left {
            display: flex;
            gap: 15px;
        }
        
        .button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .button-secondary {
            background-color: var(--secondary);
        }
        
        .button-secondary:hover {
            background-color: #e68900;
        }
        
        .button-success {
            background-color: var(--success);
        }
        
        .button-success:hover {
            background-color: #3d8b40;
        }
        
        .status-bar {
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--dark), #222);
            color: white;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 0 0 16px 16px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--dark);
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--danger);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 16px 24px;
            background-color: var(--success);
            color: white;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            display: none;
            z-index: 1100;
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .element-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .element:hover .element-controls {
            opacity: 1;
        }
        
        .element-controls .btn {
            padding: 8px 12px;
            font-size: 0.9rem;
            min-width: auto;
            flex: none;
        }
        
        .color-preview {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            border: 2px solid #ddd;
            display: inline-block;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        .screens-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .screen-item {
            padding: 12px 16px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .screen-item:hover {
            border-color: var(--primary);
            background: #f0f7ff;
        }
        
        .screen-item.selected {
            border-color: var(--primary);
            background: #e3f2fd;
            font-weight: 600;
        }
        
        .screen-actions {
            display: flex;
            gap: 5px;
        }
        
        .drag-handle {
            cursor: move;
            padding: 5px;
            color: #666;
            font-size: 1.2rem;
        }
        
        .property-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .tab-container {
            margin-top: 1.5rem;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 1.5rem;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Estilos para elementos espec√≠ficos */
        .custom-text {
            font-family: 'Roboto', sans-serif;
        }
        
        .custom-button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .custom-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .custom-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .custom-input:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <span class="logo-icon">üì±</span>
            <h1>Criador Visual de APK</h1>
        </div>
        <div>
            <button class="button button-secondary" id="newProjectBtn">
                <span>üÜï</span> Novo Projeto
            </button>
        </div>
    </header>
    
    <div class="container">
        <div class="sidebar">
            <div class="section">
                <div class="section-title">üìã Configura√ß√µes do App</div>
                <div class="form-group">
                    <label for="appName">Nome do App</label>
                    <input type="text" id="appName" class="form-control" value="Meu App Incr√≠vel">
                </div>
                <div class="form-group">
                    <label for="packageName">Pacote</label>
                    <input type="text" id="packageName" class="form-control" value="com.exemplo.meuapp">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minSdk">SDK M√≠nimo</label>
                        <select id="minSdk" class="form-control">
                            <option value="28">Android 9 (API 28)</option>
                            <option value="29">Android 10 (API 29)</option>
                            <option value="30" selected>Android 11 (API 30)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="targetSdk">SDK Alvo</label>
                        <select id="targetSdk" class="form-control">
                            <option value="30">Android 11 (API 30)</option>
                            <option value="31">Android 12 (API 31)</option>
                            <option value="33" selected>Android 13 (API 33)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="appTheme">Tema do App</label>
                    <select id="appTheme" class="form-control">
                        <option value="light">Claro</option>
                        <option value="dark">Escuro</option>
                        <option value="auto">Autom√°tico</option>
                    </select>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üß© Elementos de UI</div>
                <div class="button-group">
                    <button class="btn" id="addTextView">
                        <span>üìù</span> Texto
                    </button>
                    <button class="btn" id="addButton">
                        <span>üîò</span> Bot√£o
                    </button>
                    <button class="btn" id="addEditText">
                        <span>üìÑ</span> Campo de Texto
                    </button>
                </div>
                <div class="button-group">
                    <button class="btn" id="addImageView">
                        <span>üñºÔ∏è</span> Imagem
                    </button>
                    <button class="btn" id="addCheckbox">
                        <span>‚òëÔ∏è</span> Checkbox
                    </button>
                    <button class="btn" id="addSwitch">
                        <span>üîõ</span> Switch
                    </button>
                </div>
                <div class="button-group">
                    <button class="btn" id="addSpinner">
                        <span>üìä</span> Spinner
                    </button>
                    <button class="btn" id="addSeekBar">
                        <span>üéöÔ∏è</span> SeekBar
                    </button>
                    <button class="btn" id="addCard">
                        <span>üÉè</span> Card
                    </button>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üìê Layout</div>
                <div class="button-group">
                    <button class="btn btn-outline" id="setLinearVertical">
                        <span>üìè</span> Linear Vertical
                    </button>
                    <button class="btn btn-outline" id="setLinearHorizontal">
                        <span>üìê</span> Linear Horizontal
                    </button>
                </div>
                <div class="form-group">
                    <label for="screenBackground">Cor de Fundo</label>
                    <div>
                        <span class="color-preview" id="bgColorPreview" style="background-color: #FFFFFF"></span>
                        <input type="color" id="screenBackground" class="form-control" value="#FFFFFF" style="height: 40px;">
                    </div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">üì± Telas</div>
                <div class="button-group">
                    <button class="btn btn-secondary" id="addScreen">
                        <span>‚ûï</span> Adicionar Tela
                    </button>
                    <button class="btn btn-outline" id="manageScreens">
                        <span>‚öôÔ∏è</span> Gerenciar
                    </button>
                </div>
                <div class="screens-list" id="screensList">
                    <!-- Telas ser√£o adicionadas aqui -->
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="preview-container">
                <div class="preview-header">
                    <h3>üëÅÔ∏è Visualiza√ß√£o do App - <span id="currentScreenName">Tela Principal</span></h3>
                    <div>
                        <button class="button" id="refreshPreview">
                            <span>üîÑ</span> Atualizar Visualiza√ß√£o
                        </button>
                    </div>
                </div>
                <div class="preview-content">
                    <div class="phone-frame">
                        <div class="phone-notch"></div>
                        <div class="phone-screen" id="phoneScreen">
                            <div class="app-bar" id="appBar">Meu App Incr√≠vel</div>
                            <div class="screen-content" id="screenContent">
                                <!-- Elementos ser√£o adicionados aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="toolbar">
                <div class="toolbar-left">
                    <button class="button button-success" id="generateCode">
                        <span>‚ö°</span> Gerar C√≥digo
                    </button>
                    <button class="button button-secondary" id="testApp">
                        <span>üß™</span> Testar App
                    </button>
                </div>
                <div>
                    <button class="button" id="downloadBtn">
                        <span>üì•</span> Baixar Projeto
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="status-bar">
        <div>üì¶ Projeto: MeuApp | ü§ñ API: Android 9-16 | üíæ Compatibilidade: 32/64 bits | üîß AndroidX</div>
        <div>‚úÖ Status: Pronto para criar</div>
    </div>
    
    <!-- Modal para Novo Projeto -->
    <div class="modal" id="newProjectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üÜï Novo Projeto</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="form-group">
                <label for="newProjectName">Nome do Projeto</label>
                <input type="text" id="newProjectName" class="form-control" placeholder="Ex: MeuApp Incr√≠vel" value="MeuApp Incr√≠vel">
            </div>
            <div class="form-group">
                <label for="newPackageName">Nome do Pacote</label>
                <input type="text" id="newPackageName" class="form-control" placeholder="Ex: com.exemplo.meuapp" value="com.exemplo.meuapp">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="newMinSdk">SDK M√≠nimo</label>
                    <select id="newMinSdk" class="form-control">
                        <option value="28">Android 9 (API 28)</option>
                        <option value="29">Android 10 (API 29)</option>
                        <option value="30" selected>Android 11 (API 30)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newTargetSdk">SDK Alvo</label>
                    <select id="newTargetSdk" class="form-control">
                        <option value="30">Android 11 (API 30)</option>
                        <option value="31">Android 12 (API 31)</option>
                        <option value="33" selected>Android 13 (API 33)</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <button class="button" id="createProjectBtn" style="width: 100%;">
                    <span>üöÄ</span> Criar Projeto
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal para Adicionar Tela -->
    <div class="modal" id="addScreenModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ûï Adicionar Nova Tela</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="form-group">
                <label for="screenName">Nome da Tela (ID)</label>
                <input type="text" id="screenName" class="form-control" placeholder="Ex: tela_configuracoes">
            </div>
            <div class="form-group">
                <label for="screenTitle">T√≠tulo da Tela</label>
                <input type="text" id="screenTitle" class="form-control" placeholder="Ex: Configura√ß√µes">
            </div>
            <div class="form-group">
                <label for="screenType">Tipo de Tela</label>
                <select id="screenType" class="form-control">
                    <option value="activity">Activity</option>
                    <option value="fragment">Fragment</option>
                    <option value="dialog">Dialog</option>
                </select>
            </div>
            <div class="form-group">
                <button class="button" id="confirmAddScreenBtn" style="width: 100%;">
                    <span>‚úÖ</span> Adicionar Tela
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal para Editar Elemento -->
    <div class="modal" id="editElementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚úèÔ∏è Editar Elemento</h2>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="general">Geral</div>
                <div class="tab" data-tab="style">Estilo</div>
                <div class="tab" data-tab="layout">Layout</div>
                <div class="tab" data-tab="actions">A√ß√µes</div>
            </div>
            
            <div class="tab-content active" id="tab-general">
                <div class="form-group">
                    <label for="elementText">Texto</label>
                    <input type="text" id="elementText" class="form-control" placeholder="Texto do elemento">
                </div>
                <div class="form-group">
                    <label for="elementId">ID</label>
                    <input type="text" id="elementId" class="form-control" placeholder="Ex: meuBotao">
                </div>
                <div class="form-group">
                    <label for="elementHint">Hint (Placeholder)</label>
                    <input type="text" id="elementHint" class="form-control" placeholder="Texto de dica">
                </div>
            </div>
            
            <div class="tab-content" id="tab-style">
                <div class="property-grid">
                    <div class="form-group">
                        <label for="elementTextSize">Tamanho do Texto</label>
                        <select id="elementTextSize" class="form-control">
                            <option value="12sp">Pequeno (12sp)</option>
                            <option value="14sp">Normal (14sp)</option>
                            <option value="18sp" selected>M√©dio (18sp)</option>
                            <option value="24sp">Grande (24sp)</option>
                            <option value="32sp">Muito Grande (32sp)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="elementTextColor">Cor do Texto</label>
                        <input type="color" id="elementTextColor" class="form-control" value="#000000">
                    </div>
                    <div class="form-group">
                        <label for="elementBackground">Cor de Fundo</label>
                        <input type="color" id="elementBackground" class="form-control" value="#FFFFFF">
                    </div>
                    <div class="form-group">
                        <label for="elementPadding">Padding</label>
                        <select id="elementPadding" class="form-control">
                            <option value="0">Nenhum</option>
                            <option value="8" selected>Pequeno (8dp)</option>
                            <option value="16">M√©dio (16dp)</option>
                            <option value="24">Grande (24dp)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="tab-layout">
                <div class="property-grid">
                    <div class="form-group">
                        <label for="elementWidth">Largura</label>
                        <select id="elementWidth" class="form-control">
                            <option value="wrap_content">Envolver Conte√∫do</option>
                            <option value="match_parent" selected>Preencher Pai</option>
                            <option value="100">100dp</option>
                            <option value="200">200dp</option>
                            <option value="300">300dp</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="elementHeight">Altura</label>
                        <select id="elementHeight" class="form-control">
                            <option value="wrap_content" selected>Envolver Conte√∫do</option>
                            <option value="match_parent">Preencher Pai</option>
                            <option value="48">48dp</option>
                            <option value="64">64dp</option>
                            <option value="100">100dp</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="elementGravity">Alinhamento</label>
                        <select id="elementGravity" class="form-control">
                            <option value="start">In√≠cio</option>
                            <option value="center" selected>Centro</option>
                            <option value="end">Fim</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="elementWeight">Peso (Weight)</label>
                        <input type="number" id="elementWeight" class="form-control" value="0" min="0" max="10">
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="tab-actions">
                <div class="form-group">
                    <label for="elementOnClick">A√ß√£o ao Clicar</label>
                    <select id="elementOnClick" class="form-control">
                        <option value="none">Nenhuma</option>
                        <option value="open_screen">Abrir Tela</option>
                        <option value="show_toast">Mostrar Toast</option>
                        <option value="change_text">Mudar Texto</option>
                        <option value="close_app">Fechar App</option>
                    </select>
                </div>
                <div class="form-group" id="actionTargetContainer" style="display: none;">
                    <label for="actionTarget">Alvo da A√ß√£o</label>
                    <select id="actionTarget" class="form-control">
                        <!-- Op√ß√µes ser√£o preenchidas dinamicamente -->
                    </select>
                </div>
            </div>
            
            <div class="form-group" style="margin-top: 2rem;">
                <button class="button" id="saveElementBtn" style="width: 100%;">
                    <span>üíæ</span> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast para notifica√ß√µes -->
    <div class="toast" id="toast">‚úÖ Altera√ß√µes salvas com sucesso!</div>
    
    <script>
        // Dados do projeto
        let projectData = {
            name: "MeuApp Incr√≠vel",
            packageName: "com.exemplo.meuapp",
            minSdk: 30,
            targetSdk: 33,
            theme: "light",
            layout: "vertical",
            backgroundColor: "#FFFFFF",
            screens: {
                "main": {
                    name: "Tela Principal",
                    type: "activity",
                    backgroundColor: "#FFFFFF",
                    elements: [
                        { 
                            type: "text", 
                            id: "textView1", 
                            text: "Bem-vindo ao Meu App Incr√≠vel", 
                            textSize: "24sp",
                            textColor: "#000000",
                            backgroundColor: "#FFFFFF",
                            padding: 16,
                            width: "match_parent",
                            height: "wrap_content",
                            gravity: "center",
                            weight: 0
                        },
                        { 
                            type: "button", 
                            id: "button1", 
                            text: "Clique Aqui para Come√ßar", 
                            textSize: "18sp",
                            textColor: "#FFFFFF",
                            backgroundColor: "#2196F3",
                            padding: 16,
                            width: "match_parent",
                            height: "wrap_content",
                            gravity: "center",
                            weight: 0,
                            onClick: "show_toast",
                            actionTarget: "welcome_toast"
                        }
                    ]
                }
            },
            currentScreen: "main",
            selectedElement: null
        };

        // Elementos DOM
        const newProjectBtn = document.getElementById('newProjectBtn');
        const newProjectModal = document.getElementById('newProjectModal');
        const createProjectBtn = document.getElementById('createProjectBtn');
        const addScreenBtn = document.getElementById('addScreen');
        const addScreenModal = document.getElementById('addScreenModal');
        const confirmAddScreenBtn = document.getElementById('confirmAddScreenBtn');
        const screensList = document.getElementById('screensList');
        const phoneScreen = document.getElementById('phoneScreen');
        const screenContent = document.getElementById('screenContent');
        const appBar = document.getElementById('appBar');
        const appNameInput = document.getElementById('appName');
        const packageNameInput = document.getElementById('packageName');
        const downloadBtn = document.getElementById('downloadBtn');
        const generateCodeBtn = document.getElementById('generateCode');
        const toast = document.getElementById('toast');
        const modalCloses = document.querySelectorAll('.modal-close');
        const editElementModal = document.getElementById('editElementModal');
        const saveElementBtn = document.getElementById('saveElementBtn');
        const currentScreenName = document.getElementById('currentScreenName');
        const screenBackground = document.getElementById('screenBackground');
        const bgColorPreview = document.getElementById('bgColorPreview');
        const setLinearVertical = document.getElementById('setLinearVertical');
        const setLinearHorizontal = document.getElementById('setLinearHorizontal');

        // Elementos para adicionar √† tela
        const addTextView = document.getElementById('addTextView');
        const addButton = document.getElementById('addButton');
        const addEditText = document.getElementById('addEditText');
        const addImageView = document.getElementById('addImageView');
        const addCheckbox = document.getElementById('addCheckbox');
        const addSwitch = document.getElementById('addSwitch');
        const addSpinner = document.getElementById('addSpinner');
        const addSeekBar = document.getElementById('addSeekBar');
        const addCard = document.getElementById('addCard');

        // Sistema de abas
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Inicializa√ß√£o
        function init() {
            // Event listeners para bot√µes principais
            newProjectBtn.addEventListener('click', () => {
                newProjectModal.style.display = 'flex';
            });
            
            createProjectBtn.addEventListener('click', createNewProject);
            
            addScreenBtn.addEventListener('click', () => {
                addScreenModal.style.display = 'flex';
            });
            
            confirmAddScreenBtn.addEventListener('click', addNewScreen);
            
            downloadBtn.addEventListener('click', downloadProject);
            
            generateCodeBtn.addEventListener('click', generateCode);
            
            // Atualizar nome do app
            appNameInput.addEventListener('input', updateAppName);
            
            // Atualizar cor de fundo
            screenBackground.addEventListener('input', updateBackgroundColor);
            
            // Layout
            setLinearVertical.addEventListener('click', () => setLayout('vertical'));
            setLinearHorizontal.addEventListener('click', () => setLayout('horizontal'));
            
            // Fechar modais
            modalCloses.forEach(closeBtn => {
                closeBtn.addEventListener('click', () => {
                    closeBtn.closest('.modal').style.display = 'none';
                });
            });
            
            // Fechar modal ao clicar fora
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            // Event listeners para adicionar elementos
            addTextView.addEventListener('click', () => addElement('text'));
            addButton.addEventListener('click', () => addElement('button'));
            addEditText.addEventListener('click', () => addElement('editText'));
            addImageView.addEventListener('click', () => addElement('image'));
            addCheckbox.addEventListener('click', () => addElement('checkbox'));
            addSwitch.addEventListener('click', () => addElement('switch'));
            addSpinner.addEventListener('click', () => addElement('spinner'));
            addSeekBar.addEventListener('click', () => addElement('seekBar'));
            addCard.addEventListener('click', () => addElement('card'));
            
            // Event listener para salvar elemento editado
            saveElementBtn.addEventListener('click', saveElementChanges);
            
            // Sistema de abas
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remover classe active de todas as abas e conte√∫dos
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Adicionar classe active √† aba e conte√∫do clicados
                    tab.classList.add('active');
                    document.getElementById(`tab-${tabId}`).classList.add('active');
                });
            });
            
            // A√ß√£o ao clicar
            const elementOnClick = document.getElementById('elementOnClick');
            const actionTargetContainer = document.getElementById('actionTargetContainer');
            
            elementOnClick.addEventListener('change', () => {
                if (elementOnClick.value !== 'none') {
                    actionTargetContainer.style.display = 'block';
                    updateActionTargets();
                } else {
                    actionTargetContainer.style.display = 'none';
                }
            });
            
            // Renderizar tela atual
            updateScreensList();
            renderScreen();
            
            // Inicializar arrastar e soltar
            initDragAndDrop();
        }

        // Criar novo projeto
        function createNewProject() {
            const projectName = document.getElementById('newProjectName').value;
            const packageName = document.getElementById('newPackageName').value;
            const minSdk = document.getElementById('newMinSdk').value;
            const targetSdk = document.getElementById('newTargetSdk').value;
            
            if (!projectName || !packageName) {
                showToast('Preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            // Atualizar dados do projeto
            projectData.name = projectName;
            projectData.packageName = packageName;
            projectData.minSdk = parseInt(minSdk);
            projectData.targetSdk = parseInt(targetSdk);
            projectData.screens = {
                "main": {
                    name: "Tela Principal",
                    type: "activity",
                    backgroundColor: "#FFFFFF",
                    elements: []
                }
            };
            
            // Atualizar UI
            appNameInput.value = projectName;
            packageNameInput.value = packageName;
            document.getElementById('minSdk').value = minSdk;
            document.getElementById('targetSdk').value = targetSdk;
            
            // Atualizar lista de telas
            updateScreensList();
            
            // Fechar modal e mostrar mensagem
            newProjectModal.style.display = 'none';
            showToast('Projeto criado com sucesso!');
            
            // Renderizar tela vazia
            renderScreen();
        }

        // Adicionar nova tela
        function addNewScreen() {
            const screenName = document.getElementById('screenName').value;
            const screenTitle = document.getElementById('screenTitle').value;
            const screenType = document.getElementById('screenType').value;
            
            if (!screenName || !screenTitle) {
                showToast('Preencha todos os campos!');
                return;
            }
            
            // Adicionar tela aos dados
            const screenId = screenName.toLowerCase().replace(/\s+/g, '_');
            projectData.screens[screenId] = {
                name: screenTitle,
                type: screenType,
                backgroundColor: "#FFFFFF",
                elements: []
            };
            
            // Atualizar UI
            updateScreensList();
            
            // Fechar modal e mostrar mensagem
            addScreenModal.style.display = 'none';
            showToast('Tela adicionada com sucesso!');
            
            // Limpar campos
            document.getElementById('screenName').value = '';
            document.getElementById('screenTitle').value = '';
        }

        // Atualizar lista de telas na UI
        function updateScreensList() {
            screensList.innerHTML = '';
            
            for (const screenId in projectData.screens) {
                const screen = projectData.screens[screenId];
                const screenItem = document.createElement('div');
                screenItem.className = 'screen-item';
                if (screenId === projectData.currentScreen) {
                    screenItem.classList.add('selected');
                }
                
                screenItem.innerHTML = `
                    <div>
                        <strong>${screen.name}</strong>
                        <div style="font-size: 0.8rem; color: #666;">${screenId}</div>
                    </div>
                    <div class="screen-actions">
                        <span class="drag-handle">‚ãÆ‚ãÆ</span>
                        <button class="btn btn-danger" style="padding: 4px 8px; font-size: 0.8rem;">üóëÔ∏è</button>
                    </div>
                `;
                
                screenItem.setAttribute('data-screen', screenId);
                
                // Evento para selecionar tela
                screenItem.querySelector('div:first-child').addEventListener('click', () => {
                    // Remover sele√ß√£o de todas as telas
                    document.querySelectorAll('.screen-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    
                    // Selecionar esta tela
                    screenItem.classList.add('selected');
                    projectData.currentScreen = screenId;
                    currentScreenName.textContent = screen.name;
                    
                    // Renderizar a tela
                    renderScreen();
                });
                
                // Evento para excluir tela (exceto a principal)
                if (screenId !== 'main') {
                    screenItem.querySelector('.btn-danger').addEventListener('click', (e) => {
                        e.stopPropagation();
                        if (confirm(`Tem certeza que deseja excluir a tela "${screen.name}"?`)) {
                            delete projectData.screens[screenId];
                            if (projectData.currentScreen === screenId) {
                                projectData.currentScreen = 'main';
                            }
                            updateScreensList();
                            renderScreen();
                            showToast('Tela exclu√≠da!');
                        }
                    });
                } else {
                    screenItem.querySelector('.btn-danger').style.display = 'none';
                }
                
                screensList.appendChild(screenItem);
            }
        }

        // Adicionar elemento √† tela atual
        function addElement(type) {
            const screen = projectData.screens[projectData.currentScreen];
            const elementId = generateId(type);
            
            // Configura√ß√µes padr√£o para cada tipo
            let elementConfig = {
                type: type,
                id: elementId,
                text: getDefaultText(type),
                textSize: "18sp",
                textColor: "#000000",
                backgroundColor: getDefaultBackground(type),
                padding: 16,
                width: "match_parent",
                height: "wrap_content",
                gravity: "start",
                weight: 0,
                onClick: "none",
                actionTarget: ""
            };
            
            // Configura√ß√µes espec√≠ficas por tipo
            if (type === 'editText') {
                elementConfig.hint = "Digite aqui...";
            } else if (type === 'image') {
                elementConfig.src = "https://via.placeholder.com/150";
            }
            
            // Adicionar elemento aos dados
            screen.elements.push(elementConfig);
            
            // Renderizar tela atualizada
            renderScreen();
            
            showToast(`${getElementName(type)} adicionado!`);
        }

        // Renderizar a tela atual
        function renderScreen() {
            const screen = projectData.screens[projectData.currentScreen];
            
            // Atualizar cor de fundo
            screenContent.style.backgroundColor = screen.backgroundColor;
            screenContent.className = `screen-content ${projectData.layout === 'horizontal' ? 'layout-horizontal' : ''}`;
            
            // Limpar conte√∫do atual
            screenContent.innerHTML = '';
            
            // Adicionar cada elemento
            screen.elements.forEach((element, index) => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'element';
                elementDiv.setAttribute('data-index', index);
                
                // Estilos do elemento
                elementDiv.style.padding = element.padding + 'px';
                elementDiv.style.backgroundColor = element.backgroundColor;
                elementDiv.style.color = element.textColor;
                elementDiv.style.fontSize = element.textSize;
                elementDiv.style.textAlign = element.gravity;
                elementDiv.style.width = element.width === 'match_parent' ? '100%' : (element.width + 'px');
                elementDiv.style.minHeight = element.height === 'wrap_content' ? 'auto' : (element.height + 'px');
                
                if (projectData.layout === 'horizontal' && element.weight > 0) {
                    elementDiv.style.flex = element.weight;
                }
                
                // Criar elemento baseado no tipo
                switch (element.type) {
                    case 'text':
                        elementDiv.innerHTML = `
                            <div class="custom-text">${element.text}</div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'button':
                        elementDiv.innerHTML = `
                            <button class="custom-button" style="background: ${element.backgroundColor}; color: ${element.textColor}; font-size: ${element.textSize}; padding: 12px 20px; border-radius: 8px; border: none; width: 100%;">
                                ${element.text}
                            </button>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'editText':
                        elementDiv.innerHTML = `
                            <input type="text" class="custom-input" placeholder="${element.hint || 'Digite aqui...'}" value="${element.text}">
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'checkbox':
                        elementDiv.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="${element.id}">
                                <label for="${element.id}">${element.text}</label>
                            </div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'switch':
                        elementDiv.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                                <span>${element.text}</span>
                            </div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'image':
                        elementDiv.innerHTML = `
                            <div style="text-align: center;">
                                <img src="${element.src}" alt="${element.text}" style="max-width: 100%; border-radius: 8px;">
                                <p>${element.text}</p>
                            </div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'spinner':
                        elementDiv.innerHTML = `
                            <select class="custom-input">
                                <option>Op√ß√£o 1</option>
                                <option>Op√ß√£o 2</option>
                                <option>Op√ß√£o 3</option>
                            </select>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'seekBar':
                        elementDiv.innerHTML = `
                            <div>
                                <p>${element.text}</p>
                                <input type="range" min="0" max="100" value="50" style="width: 100%;">
                            </div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                    case 'card':
                        elementDiv.innerHTML = `
                            <div style="background: white; border-radius: 12px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                <h3 style="margin: 0 0 10px 0;">${element.text}</h3>
                                <p style="margin: 0; color: #666;">Este √© um card personalizado</p>
                            </div>
                            <div class="element-controls">
                                <button class="btn btn-secondary edit-element">‚úèÔ∏è Editar</button>
                                <button class="btn btn-danger remove-element">üóëÔ∏è Remover</button>
                            </div>
                        `;
                        break;
                }
                
                screenContent.appendChild(elementDiv);
            });
            
            // Adicionar event listeners para os bot√µes de editar/remover
            document.querySelectorAll('.edit-element').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('.element').getAttribute('data-index'));
                    openEditElementModal(index);
                });
            });
            
            document.querySelectorAll('.remove-element').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('.element').getAttribute('data-index'));
                    removeElement(index);
                });
            });
        }

        // Abrir modal para editar elemento
        function openEditElementModal(index) {
            const screen = projectData.screens[projectData.currentScreen];
            const element = screen.elements[index];
            
            // Preencher campos do modal
            document.getElementById('elementText').value = element.text || '';
            document.getElementById('elementId').value = element.id;
            document.getElementById('elementHint').value = element.hint || '';
            document.getElementById('elementTextSize').value = element.textSize;
            document.getElementById('elementTextColor').value = element.textColor;
            document.getElementById('elementBackground').value = element.backgroundColor;
            document.getElementById('elementPadding').value = element.padding;
            document.getElementById('elementWidth').value = element.width;
            document.getElementById('elementHeight').value = element.height;
            document.getElementById('elementGravity').value = element.gravity;
            document.getElementById('elementWeight').value = element.weight;
            document.getElementById('elementOnClick').value = element.onClick || 'none';
            
            // Mostrar/ocultar container de a√ß√£o
            const actionTargetContainer = document.getElementById('actionTargetContainer');
            if (element.onClick && element.onClick !== 'none') {
                actionTargetContainer.style.display = 'block';
                updateActionTargets();
                document.getElementById('actionTarget').value = element.actionTarget || '';
            } else {
                actionTargetContainer.style.display = 'none';
            }
            
            // Salvar √≠ndice do elemento sendo editado
            editElementModal.setAttribute('data-index', index);
            
            // Mostrar modal
            editElementModal.style.display = 'flex';
        }

        // Salvar altera√ß√µes do elemento
        function saveElementChanges() {
            const index = parseInt(editElementModal.getAttribute('data-index'));
            const screen = projectData.screens[projectData.currentScreen];
            const element = screen.elements[index];
            
            // Atualizar dados do elemento
            element.text = document.getElementById('elementText').value;
            element.id = document.getElementById('elementId').value;
            element.hint = document.getElementById('elementHint').value;
            element.textSize = document.getElementById('elementTextSize').value;
            element.textColor = document.getElementById('elementTextColor').value;
            element.backgroundColor = document.getElementById('elementBackground').value;
            element.padding = parseInt(document.getElementById('elementPadding').value);
            element.width = document.getElementById('elementWidth').value;
            element.height = document.getElementById('elementHeight').value;
            element.gravity = document.getElementById('elementGravity').value;
            element.weight = parseInt(document.getElementById('elementWeight').value);
            element.onClick = document.getElementById('elementOnClick').value;
            element.actionTarget = document.getElementById('actionTarget').value;
            
            // Fechar modal e renderizar tela
            editElementModal.style.display = 'none';
            renderScreen();
            
            showToast('Elemento atualizado com sucesso!');
        }

        // Remover elemento
        function removeElement(index) {
            const screen = projectData.screens[projectData.currentScreen];
            screen.elements.splice(index, 1);
            renderScreen();
            showToast('Elemento removido!');
        }

        // Atualizar nome do app
        function updateAppName() {
            projectData.name = appNameInput.value;
            appBar.textContent = appNameInput.value;
        }

        // Atualizar cor de fundo
        function updateBackgroundColor() {
            const color = screenBackground.value;
            projectData.screens[projectData.currentScreen].backgroundColor = color;
            bgColorPreview.style.backgroundColor = color;
            renderScreen();
        }

        // Definir layout
        function setLayout(layout) {
            projectData.layout = layout;
            renderScreen();
            
            // Atualizar bot√µes
            if (layout === 'vertical') {
                setLinearVertical.classList.add('btn');
                setLinearVertical.classList.remove('btn-outline');
                setLinearHorizontal.classList.add('btn-outline');
                setLinearHorizontal.classList.remove('btn');
            } else {
                setLinearHorizontal.classList.add('btn');
                setLinearHorizontal.classList.remove('btn-outline');
                setLinearVertical.classList.add('btn-outline');
                setLinearVertical.classList.remove('btn');
            }
        }

        // Atualizar alvos de a√ß√£o
        function updateActionTargets() {
            const actionTarget = document.getElementById('actionTarget');
            actionTarget.innerHTML = '';
            
            // Adicionar telas como alvos
            for (const screenId in projectData.screens) {
                if (screenId !== projectData.currentScreen) {
                    const option = document.createElement('option');
                    option.value = screenId;
                    option.textContent = projectData.screens[screenId].name;
                    actionTarget.appendChild(option);
                }
            }
            
            // Adicionar a√ß√µes predefinidas
            const predefinedActions = [
                { value: 'welcome_toast', text: 'Toast de Boas-vindas' },
                { value: 'close_app', text: 'Fechar Aplicativo' }
            ];
            
            predefinedActions.forEach(action => {
                const option = document.createElement('option');
                option.value = action.value;
                option.textContent = action.text;
                actionTarget.appendChild(option);
            });
        }

        // Inicializar arrastar e soltar
        function initDragAndDrop() {
            let draggedElement = null;
            
            document.addEventListener('dragstart', (e) => {
                if (e.target.classList.contains('element')) {
                    draggedElement = e.target;
                    e.target.classList.add('dragging');
                }
            });
            
            document.addEventListener('dragend', (e) => {
                if (e.target.classList.contains('element')) {
                    e.target.classList.remove('dragging');
                    draggedElement = null;
                }
            });
            
            screenContent.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            screenContent.addEventListener('drop', (e) => {
                e.preventDefault();
                if (draggedElement) {
                    // Reordenar elementos no array
                    const fromIndex = parseInt(draggedElement.getAttribute('data-index'));
                    const screen = projectData.screens[projectData.currentScreen];
                    const element = screen.elements[fromIndex];
                    
                    // Calcular √≠ndice de destino
                    const elements = Array.from(screenContent.children);
                    const toIndex = elements.indexOf(e.target.closest('.element') || screenContent);
                    
                    if (toIndex !== -1 && toIndex !== fromIndex) {
                        // Remover elemento da posi√ß√£o original
                        screen.elements.splice(fromIndex, 1);
                        // Inserir na nova posi√ß√£o
                        screen.elements.splice(toIndex, 0, element);
                        
                        // Renderizar novamente
                        renderScreen();
                        showToast('Elemento movido!');
                    }
                }
            });
        }

        // Gerar c√≥digo do projeto
        function generateCode() {
            showToast('C√≥digo gerado com sucesso! Verifique o console para visualizar.');
            
            // Aqui seria gerado todo o c√≥digo Java e XML
            // Por simplicidade, vamos apenas mostrar no console
            console.log("=== C√ìDIGO GERADO ===");
            console.log("MainActivity.java:", generateMainActivityCode());
            console.log("activity_main.xml:", generateLayoutCode());
            console.log("AndroidManifest.xml:", generateManifestCode());
        }

        // Baixar projeto completo (CORRIGIDO)
        function downloadProject() {
            showToast('Preparando projeto para download...');
            
            // Criar um objeto com todos os arquivos do projeto
            const projectFiles = {
                'app/build.gradle': generateGradleCode(),
                'app/src/main/AndroidManifest.xml': generateManifestCode(),
                'app/src/main/java/' + projectData.packageName.replace(/\./g, '/') + '/MainActivity.java': generateMainActivityCode(),
                'app/src/main/res/layout/activity_main.xml': generateLayoutCode(),
                'app/src/main/res/values/strings.xml': generateStringsCode(),
                'app/src/main/res/values/colors.xml': generateColorsCode(),
                'app/src/main/res/values/styles.xml': generateStylesCode(),
                'README.txt': 'Projeto Android gerado pelo Criador Visual de APK\nCompat√≠vel com AIDE (Android 9-16, 32/64 bits, AndroidX)'
            };
            
            // Criar um objeto Blob com estrutura de projeto
            const projectStructure = {
                name: projectData.name,
                package: projectData.packageName,
                files: projectFiles
            };
            
            // Criar um blob com os dados
            const blob = new Blob([JSON.stringify(projectStructure, null, 2)], {
                type: 'application/json'
            });
            
            // Criar link de download
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${projectData.name.replace(/\s+/g, '_')}_android_project.json`;
            document.body.appendChild(a);
            a.click();
            
            // Limpar
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showToast('Projeto baixado com sucesso!');
            }, 100);
        }

        // Fun√ß√µes auxiliares
        function generateId(type) {
            return `${type}_${Date.now()}`;
        }

        function getDefaultText(type) {
            const texts = {
                'text': 'Novo Texto',
                'button': 'Novo Bot√£o',
                'editText': '',
                'image': 'Imagem',
                'checkbox': 'Nova Op√ß√£o',
                'switch': 'Nova Configura√ß√£o',
                'spinner': 'Selecionar Op√ß√£o',
                'seekBar': 'Ajustar Valor',
                'card': 'Card Personalizado'
            };
            return texts[type] || 'Elemento';
        }

        function getDefaultBackground(type) {
            const backgrounds = {
                'text': '#FFFFFF',
                'button': '#2196F3',
                'editText': '#FFFFFF',
                'image': '#FFFFFF',
                'checkbox': '#FFFFFF',
                'switch': '#FFFFFF',
                'spinner': '#FFFFFF',
                'seekBar': '#FFFFFF',
                'card': '#FFFFFF'
            };
            return backgrounds[type] || '#FFFFFF';
        }

        function getElementName(type) {
            const names = {
                'text': 'Texto',
                'button': 'Bot√£o',
                'editText': 'Campo de Texto',
                'image': 'Imagem',
                'checkbox': 'Checkbox',
                'switch': 'Switch',
                'spinner': 'Spinner',
                'seekBar': 'SeekBar',
                'card': 'Card'
            };
            return names[type] || 'Elemento';
        }

        function showToast(message) {
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // Fun√ß√µes para gerar c√≥digo (simula√ß√£o)
        function generateMainActivityCode() {
            return `package ${projectData.packageName};

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        
        // C√≥digo gerado automaticamente
        // App compat√≠vel com Android 9-16 (API 28-33)
    }
}`;
        }

        function generateLayoutCode() {
            return `<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="${projectData.layout === 'horizontal' ? 'horizontal' : 'vertical'}"
    android:padding="16dp"
    android:background="${projectData.screens.main.backgroundColor}">
    
    <!-- Layout gerado automaticamente -->
    <!-- Projeto compat√≠vel com AIDE - AndroidX -->
    
</LinearLayout>`;
        }

        function generateManifestCode() {
            return `<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="${projectData.packageName}">

    <uses-sdk
        android:minSdkVersion="${projectData.minSdk}"
        android:targetSdkVersion="${projectData.targetSdk}" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="${projectData.name}"
        android:theme="@style/AppTheme">
        <activity
            android:name=".MainActivity"
            android:label="${projectData.name}">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>`;
        }

        function generateGradleCode() {
            return `apply plugin: 'com.android.application'

android {
    compileSdkVersion ${projectData.targetSdk}
    
    defaultConfig {
        applicationId "${projectData.packageName}"
        minSdkVersion ${projectData.minSdk}
        targetSdkVersion ${projectData.targetSdk}
        versionCode 1
        versionName "1.0"
        
        // Suporte para 32 e 64 bits
        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
        }
    }
    
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.3.1'
    implementation 'com.google.android.material:material:1.4.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.0'
}`;
        }

        function generateStringsCode() {
            return `<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">${projectData.name}</string>
</resources>`;
        }

        function generateColorsCode() {
            return `<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorPrimary">#2196F3</color>
    <color name="colorPrimaryDark">#1976D2</color>
    <color name="colorAccent">#FF9800</color>
</resources>`;
        }

        function generateStylesCode() {
            return `<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
    </style>
</resources>`;
        }

        // Inicializar a aplica√ß√£o
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>